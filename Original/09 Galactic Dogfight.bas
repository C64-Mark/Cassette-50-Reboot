!--------------------------------------------------
!- 27 October 2019 08:06:27
!- Import of : GAL.PRG
!- From Disk : c:\users\marka\games\c64\cbmprg\cassette50reboot\galdogfight.d64
!- Commodore 64
!--------------------------------------------------
10 POKE53280,0:POKE53281,0:PRINT"{clear}{down}";
11 POKE649,1:POKE650,255:POKE651,1:POKE652,1:POKE198,2
20 PRINT"{space*10}N{cm y*17}M"
24 PRINT"{space*6}{sh space}{space*3}{cm h}galactic dogfight{cm n}"
30 PRINT"{space*10}M{cm p*17}N"
40 PRINT"{down}this is a game for 2 players,one using{space*2}a joystick in port1 and the";
50 PRINT" other the{space*3}keyboard or the other joystick in port2"
60 PRINT"{down}you have to shoot your opponent's five{space*2}planes down using rockets or";
70 PRINT" air-mines."
80 PRINT"{down}you can also use the turbo boosters to{space*2}get you,either out of trouble";
90 PRINT" or to{space*5}surprise your opponent."
92 PRINT "{down}you have 5 mines and 5 turbo boosts for every five dogfights so use";
93 PRINT " them with{space*3}care to shoot down your opponent's star fighter."
95 PRINT "key or joystick port2 player on left"
97 PRINT "joystick port1 player on the{space*3}right"
100 PRINT"{down}{space*15}hit space"
102 GOSUB10000:GOSUB10020
110 A$="":GET A$:IF A$<>" "THEN 110
130 PRINT"{clear}{down}{space*8}if using the joystick:"
140 PRINT"{down}{reverse on}west {reverse off} rotate left{space*6}{reverse on}east{reverse off} rotate right"
150 PRINT"{reverse on}fire {reverse off} launch rocket{space*4}{reverse on}north{reverse off} turbo boost"
160 PRINT"{reverse on}south{reverse off} place mine"
170 PRINT"{down*2}{space*8}if using the keyboard:"
180 PRINT"{down}{reverse on}<{reverse off}{space*2}rotate left{space*9}{reverse on}>{reverse off} rotate right"
190 PRINT"{down}{reverse on}z{reverse off}{space*2}launch rocket{space*7}{reverse on}?{reverse off} turbo boost"
200 PRINT"{down}{reverse on}x{reverse off}{space*2}place mine"
510 DATA 16,56,56,56,16,56,124,108
520 DATA 1,14,14,14,112,208,48,32
530 DATA 0,192,238,127,238,192,0,0
540 DATA 32,48,208,112,14,14,14,1
550 DATA 108,124,56,16,56,56,56,16
560 DATA 4,12,11,14,112,112,112,128
570 DATA 0,3,119,254,119,3,0,0
580 DATA 128,112,112,112,14,11,12,4
590 DATA 0,8,8,120,30,16,16,0
600 DATA 0,0,0,24,24,0,0,0
610 DATA 16,48,56,56,92,100,124,254
620 DATA 254,116,44,56,16,16,16,255
630 DATA 24,60,108,118,124,56,16,255
640 DATA 255,255,255,255,255,255,255,255
650 DATA 0,0,0,0,24,60,126,255
660 DATA 128,128,224,248,248,240,224,128
680 DATA 255,126,126,60,24,8,0,0
690 DATA 1,7,7,31,15,7,3,1
700 DATA 255,255,255,255,255,255,255,255
710 DATA 3,3,0,0,0,0,0,0
720 DATA 0,0,0,0,14,15,7,7
730 DATA 0,0,0,0,0,128,224,192
740 DATA 224,224,192,0,0,0,0,0
750 DATA 24,126,129,90,36,24,24,36
760 DATA 137,93,42,212,47,52,206,145
770 DATA 5,2,1,0,0,0,0,0
780 DATA 0,0,0,0,0,1,2,5
790 DATA 0,0,0,0,0,128,64,160
800 DATA 160,64,128,0,0,0,0,0
810 DATA 0,0,0,0,0,0,0,0
820 DATA 0,92,92,126,126,92,92,0
850 POKE53280,0:POKE53281,0:PRINT"{down}{space*14}please wait"
860 PRINT"{space*10}N{cm y*17}M"
870 PRINT"{sh space}{space*9}{cm h}galactic dogfight{cm n}"
880 PRINT"{space*10}M{cm p*17}N"
900 PRINT"{down}{space*11}joystick required":GOTO59000
1000 POKE53280,0:POKE650,129:POKE53281,0:POKE54296,15:POKE53272,31
1010 PRINT "{clear}{up}{white}hhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhh";:GOSUB10000
1020 FOR I=1 TO 4:PRINT"{]*40}";:NEXT
1030 PRINT"{]*45}";
1040 FOR I=0 TO5:PRINT"{]*27}qrrrrro";:NEXT
1050 PRINT "{]*31}";
1060 FORI=1 TO10:PRINT"{]*40}";:NEXT
1090 PRINT"{green}mmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmm";
1100 PRINT"{light blue}@@@@@rhhhhhr{^*5}{yellow}rrrrrr{purple}@@@@@rhhhhhr{^*5}";
1120 B=54272
1130 A1=1873:M1=-40:P1=5:N1=5
1140 A2=1895:M2=-40:P2=5:N2=5
1150 POKEA1,0:POKEA2,0:POKEA1+B,2:POKEA2+B,5
1180 ONC1+1GOTO1240,1250,1260,1270,1280,1290,1300,1310
1240 M1=-40:GOTO1320
1250 M1=-39:GOTO1320
1260 M1=1:GOTO1320
1270 M1=41:GOTO1320
1280 M1=40:GOTO1320
1290 M1=39:GOTO1320
1300 M1=-1:GOTO1320
1310 M1=-41
1320 A1=A1+M1:A3=PEEK(A1)
1330 IF PEEK(A1-M1)<8THENPOKEA1-M1,29
1340 IF A1=A2THENZ=A1:GOSUB1820:GOSUB1910:GOSUB1960:GOTO 1180
1350 IF A3=29 THEN POKEA1,C1:POKEA1+B,14
1360 IF A3<14THENZ=A1:GOSUB1790:GOSUB1820:GOSUB1960
1370 IF T2>0THENT2=T2-1:GOTO1320
1380 IF T1=0 THEN 1470
1390 FOR I1=1TO2
1400 SF=SF+S1:T3=T3+1
1410 IF PEEK(SF-S1)=9 THEN POKE SF-S1,29
1420 IF PEEK(SF)=29 THEN POKE SF,9:POKESF+B,14:GOTO1450
1430 IF SF=A2THENZ=A2:GOSUB1870:GOSUB1930:GOSUB1910:GOSUB1820:GOSUB1960
1440 IF PEEK(SF)<14 THEN GOSUB 1820
1450 IF T3=8THENGOSUB1820:I1=3
1460 NEXT
1462 IFJM=0ORZX=12THEN1510
1470 JO=NOTPEEK(56321)AND15:JV=PEEK(56321)AND16:ZX=PEEK(197)
1472 JL=NOTPEEK(56320)AND15:JM=PEEK(56320)AND16
1480 IF JO=4THENC2=C2-1:IFC2=-1THENC2=7:GOTO1530
1482 IF JL=4ORZX=47THENC1=C1-1:IFC1=-1THENC1=7:GOTO1530
1490 IF JO=8THENC2=C2+1:IF C2=8THENC2=0:GOTO1530
1492 IF JL=8ORZX=44THENC1=C1+1:IF C1=8THENC1=0:GOTO1530
1500 IF JV=0ANDD1=0THEND1=1:SA=A2:S2=M2:GOTO1690
1502 IF JM=0ORZX=12ANDT1=0THENT1=1:SF=A1:S1=M1:GOTO1390
1510 IFJO=2ANDN2>0ANDPEEK(A2-M2)=29THENN2=N2-1:POKEA2-M2,8:G2=G2-1:POKE1978+G2,29
1511 IFJL=2ORZX=23THENIFN1>0ANDPEEK(A1-M1)=29THEN1513
1512 GOTO1520
1513 N1=N1-1:POKEA1-M1,8:F2=F2-1:POKE1955+F2,29
1520 IF JO=1ANDP2>0THENP2=P2-1:D2=5:G3=G3-1:POKE1984+G3,29
1522 IF JL=1ORZX=55THENIFP1>0THENP1=P1-1:T2=5:F3=F3-1:POKE1961+F3,29
1530 ONC2+1GOTO1540,1550,1560,1570,1580,1590,1600,1610
1540 M2=-40:GOTO1620
1550 M2=-39:GOTO1620
1560 M2=1:GOTO1620
1570 M2=41:GOTO1620
1580 M2=40:GOTO1620
1590 M2=39:GOTO1620
1600 M2=-1:GOTO1620
1610 M2=-41:GOTO1620
1620 A2=A2+M2:A4=PEEK(A2)
1630 IFPEEK(A2-M2)<8THENPOKEA2-M2,29
1640 IFA1=A2THENZ=A2:GOSUB1780:GOSUB1820:GOSUB1870:GOSUB1910:GOSUB1960:GOSUB1470
1650 IF A4=29THENPOKEA2,C2:POKEA2+B,4
1660 IF A4<14THENZ=A2:GOSUB1880:GOSUB1910:GOSUB1820:GOSUB1960
1670 IF D2>0THEND2=D2-1:GOTO1620
1680 IF D1=0 THEN 1180
1690 FOR I2=1 TO 2
1700 SA=SA+S2:D3=D3+1
1710 IF PEEK(SA-S2)=9THENPOKESA-S2,29
1720 IF PEEK(SA)=29THENPOKESA,9:POKESA+B,4:GOTO1750
1730 IF SA=A1THENZ=A1:GOSUB1780:GOSUB1840:GOSUB1820:GOSUB1910:GOSUB1960
1740 IF PEEK(SA)<14THENGOSUB1910
1750 IF D3=8 THEN GOSUB1910:I2=3
1760 NEXT
1770 GOTO 1180
1780 IF PEEK(A1)<8 THEN POKEA1,29
1790 A1=1873:C1=0:M1=-40
1800 F1=F1-1:POKE1944+5+F1,23
1810 RETURN
1820 IF PEEK(SF)=9 THEN POKE SF,29
1830 T1=0:T3=0:SF=0:S1=P:RETURN
1840 IF PEEK(A1)<8 THEN POKE A1,29
1850 IF PEEK(SA)=9 THEN POKE SA,29
1860 RETURN
1870 IF PEEK(A2)<8 THEN POKE A2,29
1880 A2=1895:C2=0:M2=-40
1890 G1=G1-1:POKE1972+G1,23
1900 RETURN
1910 IF PEEK(SA)=9 THEN POKE SA,29
1920 D1=0:D3=0:SA=0:S2=0:RETURN
1930 IF PEEK(A2)<8THEN POKE A2,29
1940 IF PEEK(SF)=9 THEN POKE SF,29
1950 RETURN
1960 IF Z>1863 THEN J2=Z:GOTO 2030
1970 POKE54276,17:J1=50:FOR J2=Z+40TO1903STEP40
1980 J1=J1+3:POKE54273,J1:POKE54272,J1:V=V+1:IFV>7THENV=0
1990 IF PEEK(J2-40)<8THEN POKEJ2-40,29
2000 IF PEEK(J2)=29THEN POKE J2+B,INT(15*RND(1))+1
2010 NEXT
2020 POKE54276,129
2030 FOR J3=15 TO 1 STEP -.5:POKE54273,J3:POKE54272,J3:POKE54296,J3
2040 POKE J2-40,24:POKE J2+B-40,INT(15*RND(1))
2050 NEXT:POKE54296 ,15:POKE54273,0:POKEJ2-40,29:POKEJ2-80,29:GOSUB10000
2060 IF G1=-5 AND F1=-5THEN POKE53272,21:PRINT"{clear}{white}{down*6}{space*4}it is a draw 5 each"
2070 IFG1=-5ANDF1<>-5THENPOKE53272,21:PRINT"{clear}{down}key/joystick port2 player wins 5 to";ABS(F1)
2080 IFF1=-5ANDG1<>-5  THENPOKE53272,21:PRINT"{clear}{down}joystick player wins 5 to";ABS(G1)
2090 IF G1=-5 OR F1=-5 THEN 2110
2100 RETURN
2110 GOSUB10020:FORZX=1TO1500:NEXT:PRINT"{down*2} press space bar to continue"
2120 GETA$:IF A$<>" "THEN 2120
2130 CLR:GOTO1000
10000 POKE54296,15:POKE54277,16:POKE54278,248:POKE54276,129
10010 POKE54273,12:POKE54272,8:RETURN
10020 POKE54276,33:FORZX=1 TO 150:POKE54273,ZX:POKE54272,ZX:NEXT
10030 POKE54273,0:POKE54272,0:RETURN
59000 REM CHAR DEF
59010 POKE52,56:POKE56,56:CLR:POKE56334,PEEK(56334)AND254:CN=0
59020 POKE1,PEEK(1)AND251
59030 FORI=0TO511:POKEI+14336,PEEK(53248+I):NEXTI
59040 POKE1,PEEK(1)OR4:POKE56334,PEEK(56334)OR1
59060 FORI=0TO7:READCD
59062 IFCD<0THENI=7:GOTO59099
59064 POKE14336+8*CN+I,CD:NEXTI
59070 CN=CN+1:GOTO59060
59080 DATA-1
59099 GOTO1000
