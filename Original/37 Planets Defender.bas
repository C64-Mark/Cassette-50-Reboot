!--------------------------------------------------
!- 28 October 2019 21:18:53
!- Import of : PLANET.PRG
!- From Disk : c:\users\marka\games\c64\cbmprg\cassette50reboot\planetsdefender.d64
!- Commodore 64
!--------------------------------------------------
10 POKE53280,0:POKE53281,0:PRINT"{clear}{down}";:POKE649,1:POKE650,255:POKE651,1:POKE652,1:POKE198,2:PRINT"{space*10}N{cm y*17}M":PRINT"{space*6}{sh space}{space*3}{cm h}planets{space*2}defender{cm n}":PRINT"{space*10}M{cm p*17}N":PRINT"{down}you must defend your planet from a 
45 PRINT"fleet of ufo's by guiding missiles onto":PRINT"them. they accelerate as they come down to bomb your planet.":PRINT"you have twenty missiles to shoot down":PRINT"10 of the ufo's. good luck!":PRINT"use the keyboard or joystick in port2
80 PRINT"{down}you can use the hyperthrust which gives an extra burst of speed but ":PRINT"makes the missile difficult to control ":PRINT"{down}your planet is destroyed if you run out of missiles":PRINT"if ufo is not destroyed it will return!
100 PRINT"{down}{space*15}hit space":GOSUB10000:GOSUB10020
110 A$="":GETA$:IFA$<>" "THEN110
130 PRINT"{clear}{down}{space*8}if using the joystick:":PRINT"{down}{reverse on}west {reverse off} left{space*6}{reverse on}east{reverse off} right":PRINT"{down}{reverse on}north{reverse off} hyperthrust":PRINT"{down*2}{space*8}if using the keyboard:":PRINT"{down}{reverse on}<{reverse off}{space*2}left{space*8}{reverse on}>{reverse off} right":PRINT"{down}{reverse on}?{reverse off} hyperthrust":DATA 16,56,56,56,16,56,124,108
520 DATA 1,14,14,14,112,208,48,32, 0,192,238,127,238,192,0,0, 32,48,208,112,14,14,14,1, 108,124,56,16,56,56,56,16, 4,12,11,14,112,112,112,128, 0,3,119,254,119,3,0,0, 128,112,112,112,14,11,12,4:POKE53280,0:POKE53281,0
850 PRINT"{down}{space*14}please wait":PRINT"{space*10}N{cm y*17}M":PRINT"{sh space}{space*9}{cm h}planets{space*2}defender{cm n}":PRINT"{space*10}M{cm p*17}N":GOTO59000
910 PRINT"{clear}{down*4}{space*4}set skill level 1=easy{space*2}7=hard:
912 GETA$:IFA$=""THEN912
914 DZ=INT(VAL(A$)):IFDZ<1ORDZ>7THEN192
1000 POKE53280,0:POKE650,129:POKE53281,3:POKE54296,15:POKE53272,31:PRINT"{clear}{up}{white}hhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhh";:GOSUB10000:FORI=1TO19:PRINT"{]*40}";:NEXT:PRINT"{green}hhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhh";
1090 PRINT"{yellow}{reverse on}{space*5}missiles{space*17}u.f.o's{space*3}";:PRINT"{reverse off}{light blue}@@@@@@@@@@@@@@@@@@@@{space*8}hhhhhhhhhh{space*2}";:B=54272:A1=1804:M1=-40:P1=100:N1=20:POKEA1,0:POKEA1+B,2:SE=1
1180 ONC1+1GOTO1240,1250,1260,1270,1280,1290,1300,1310
1240 M1=-40:GOTO1320
1250 M1=-39:GOTO1320
1260 M1=1:GOTO1320
1270 M1=41:GOTO1320
1280 M1=40:GOTO1320
1290 M1=39:GOTO1320
1300 M1=-1:GOTO1320
1310 M1=-41
1320 A1=A1+M1:A3=PEEK(A1):IFPEEK(A1-M1)<8THENPOKEA1-M1,29
1340 IFA1=A2THENZ=A1:GOSUB1820:GOSUB1910:GOSUB1960:GOTO1180
1350 IFA3=29THENPOKEA1,C1:POKEA1+B,14
1360 IFA3<14THENZ=A1:GOSUB1790:GOSUB1820:GOSUB1960
1370 IFT2>0THENT2=T2-1:GOTO1320
1380 IFT1=0THEN1400
1400 POKE1104+SP,29:SP=SP+SE:POKE1104+SP,8:POKEB+1104+SP,0:SE=SE+.04:IFSE>DZTHENSE=DZ
1402 IFSP>680THENPOKE1104+SP,29:SP=1:SE=1
1470 ZX=PEEK(197):JL=NOTPEEK(56320)AND15:IFJL=4ORZX=47THENC1=C1-1:IFC1=-1THENC1=7:GOTO1180
1492 IFJL=8ORZX=44THENC1=C1+1:IFC1=8THENC1=0:GOTO1180
1522 IFJL=1ORZX=55THENT2=5
1610 M2=-41:GOTO1180
1670 IFD2>5THEND2=D2-1:GOTO1620
1680 IFD1=0THEN1180
1780 IFPEEK(A1)<8THENPOKEA1,29
1790 A1=1804:C1=0:M1=-40:F1=F1-1:POKE1904+20+F1,29:RETURN
1820 IFPEEK(SF)=9THENPOKESF,29
1830 T1=0:T3=0:SF=0:S1=P:RETURN
1840 IFPEEK(A1)<8THENPOKEA1,29
1850 IFPEEK(SA)=9THENPOKESA,29
1860 RETURN
1910 IFPEEK(SA)=9THENPOKESA,29
1920 D1=0:D3=0:SA=0:S2=0:RETURN
1940 IFPEEK(SF)=9THENPOKESF,29
1950 RETURN
1960 J2=Z:GOTO2030
1970 POKE54276,17:J1=50:FORJ2=Z+40TO1903STEP40:J1=J1+3:POKE54273,J1:POKE54272,J1:V=V+1:IFV>7THENV=0
1990 IFPEEK(J2-40)<8THENPOKEJ2-40,29
2000 IFPEEK(J2)=29THENPOKEJ2+B,INT(15*RND(1))+1
2010 NEXT:WV=129
2030 FORJ3=1TO15:POKEJ2,24:POKEJ2+B,INT(15*RND(1)):NEXT:POKEJ2,29:POKEJ2+B,1:IFJ2<1063ORJ2>1823THENPOKEJ2,8:POKEJ2+B,1:GOTO2091
2052 G2=G2+1:POKE1942-G2,29:GOSUB10040:GOSUB10000:POKE1064+SP,29:SP=1:SE=1
2091 IFG2=10THENPOKE53272,21:PRINT"{clear}{down*4} you saved the planet":GOTO2110
2092 IFF1=-20THENPOKE53272,21:PRINT"{clear}{down*4} no more missiles:ufo's win":GOTO2110
2099 IFG2=10ORF1=-20THEN2110
2100 RETURN
2110 GOSUB10020:FORZX=1TO1500:NEXT:PRINT"{down*2} press space bar to continue
2120 GETA$:IFA$<>" "THEN2120
2130 CLR:GOTO910
10000 POKE54296,15:POKE54276,33:POKE54273,3:POKE54272,33:RETURN
10020 POKE54276,33:FORZX=1TO150STEP3:POKE54273,ZX:POKE54272,ZX:NEXT:POKE54273,0:POKE54272,0:RETURN
10040 POKE54276,129:ZF=4:POKE54296,15:FORZD=30TO2STEP-1:POKE54273,ZD:POKE54272,ZD:NEXT:POKE54272,30:POKE54273,30:RETURN
40080 DATA 0,0,0,0,24,60,126,255, 192 , 224 , 192 , 159 , 211 , 145 , 153 , 223, 16,48,56,56,92,100,124,254, 254,116,44,56,16,16,16,255, 24,60,108,118,124,56,16,255, 255,255,255,255,255,255,255,255, 0,0,0,0,24,60,126,255
40660 DATA 128,128,224,248,248,240,224,128, 255,126,126,60,24,8,0,0, 1,7,7,31,15,7,3,1, 255,255,255,255,255,255,255,255, 3,3,0,0,0,0,0,0, 0,0,0,0,14,15,7,7, 0,0,0,0,0,128,224,192, 224,224,192,0,0,0,0,0
40750 DATA 24,126,129,90,36,24,24,36, 137,93,42,212,47,52,206,145, 5,2,1,0,0,0,0,0, 0,0,0,0,0,1,2,5, 0,0,0,0,0,128,64,160, 160,64,128,0,0,0,0,0, 0,0,0,0,0,0,0,0, 0,92,92,126,126,92,92,0
59000 POKE52,56:POKE56,56:CLR:POKE56334,PEEK(56334)AND254:CN=0:POKE1,PEEK(1)AND251:FORI=0TO2048:POKEI+14336,PEEK(53248+I):NEXTI:POKE1,PEEK(1)OR4:POKE56334,PEEK(56334)OR1
59060 FORI=0TO7:READCD:IFCD<0THENI=7:GOTO59099
59064 POKE14336+8*CN+I,CD:NEXTI:CN=CN+1:GOTO59060
59080 DATA-1
59099 GOTO910
