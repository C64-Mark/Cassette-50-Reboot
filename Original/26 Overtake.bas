!--------------------------------------------------
!- 27 October 2019 23:53:57
!- Import of : OVER.PRG
!- From Disk : c:\users\marka\games\c64\cbmprg\cassette50reboot\overtake.d64
!- Commodore 64
!--------------------------------------------------
10 POKE53280,0:POKE53281,0:PRINT"{clear}{down}";
11 POKE649,1:POKE650,255:POKE651,1:POKE652,1:POKE198,2
20 PRINT"{space*10}N{cm y*17}M"
24 PRINT"{space*6}{sh space}{space*3}{cm h} o v e r t a k e {cm n}"
30 PRINT"{space*10}M{cm p*17}N"
40 PRINT"{down}this is a game for 2 players,one using{space*2}a joystick in port1 and the";
50 PRINT" other the{space*3}keyboard or the other joystick in port2"
60 PRINT"{down}you have to beat{space*2}your opponent's five{space*2}cars by racing";
70 PRINT" round the track anticlock-wise as fast{space*2}as you can. no cheating!"
80 PRINT"{down}you can use the accelerator which gives an extra burst of speed but ";
90 PRINT"uses up fuelrapidly. if you run out of fuel you can coast along."
92 PRINT"{down}you lose if you crash all five cars "
95 PRINT "{down}key or joystick port2 player on left"
97 PRINT "joystick port1 player on the{space*3}right"
100 PRINT"{down}{space*15}hit space"
102 GOSUB10000:GOSUB10020
110 A$="":GET A$:IF A$<>" "THEN 110
130 PRINT"{clear}{down}{space*8}if using the joystick:"
140 PRINT"{down}{reverse on}west {reverse off} steer{space*2}left{space*6}{reverse on}east{reverse off} steer{space*2}right"
150 PRINT"{reverse on}north{reverse off} accelerator"
170 PRINT"{down*2}{space*8}if using the keyboard:"
180 PRINT"{down}{reverse on}<{reverse off}{space*2}steer{space*2}left{space*9}{reverse on}>{reverse off} steer{space*2}right"
190 PRINT"{down}{reverse on}?{reverse off} accelerator"
850 POKE53280,0:POKE53281,0:PRINT"{down}{space*14}please wait"
860 PRINT"{space*10}N{cm y*17}M"
870 PRINT"{sh space}{space*9}{cm h} o v e r t a k e {cm n}"
880 PRINT"{space*10}M{cm p*17}N"
900 GOTO59000
1000 POKE53280,0:POKE650,129:POKE53281,3:POKE54296,15:POKE53272,31
1010 PRINT "{clear}{up}{white}hhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhh";:GOSUB10000
1020 FOR I=1 TO 4:PRINT"h{]*38}h";:NEXT
1022 PRINT"h{]*4}hhhhhhhhhhhhhhhhhhhhhhhhhhhhhh{]*4}h";
1040 FOR I=0 TO7:PRINT"h{]*3}h{]*30}h{]*3}h";:NEXT
1042 PRINT"h{]*3}h{]*28}{black}i{white}]h{]*3}h";
1044 PRINT"h{]*3}h{]*28}{black}{cm +*2}h{]*3}h{white}";
1050 PRINT"h{]*4}hhhhhhhhhhhhhhhhhhhhhhhhhhhhhh{]*4}h";
1052 FOR I=1 TO 3:PRINT"h{]*38}h";:NEXT
1054 PRINT"h{]*38}h";
1060 PRINT"hhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhh";
1090 PRINT"{yellow}{reverse on}cars{cm +*2}laps{cm +}fuel{cm +*8}cars{cm +*2}laps{cm +}fuel{cm +*2}";
1100 PRINT"{reverse off}{light blue}@@@@@rmmmmr{reverse on}{cm t}{cm y}{reverse off}{cm i}{cm o}{cm p}{cm @}{yellow}rrrrrr{purple}@@@@@rmmmmr{reverse on}{cm t}{cm y}{reverse off}{cm i}{cm o}{cm p}{cm @}";
1120 B=54272
1130 A1=1820-200:M1=-40:P1=100:N1=5
1140 A2=1822-200:M2=-40:P2=100:N2=5
1150 POKEA1,0:POKEA2,0:POKEA1+B,2:POKEA2+B,5
1180 GOSUB3000:ON C1+1GOTO1240,1250,1260,1270,1280,1290,1300,1310
1240 M1=-40:GOTO1320
1250 M1=-39:GOTO1320
1260 M1=1:GOTO1320
1270 M1=41:GOTO1320
1280 M1=40:GOTO1320
1290 M1=39:GOTO1320
1300 M1=-1:GOTO1320
1310 M1=-41
1320 A1=A1+M1:A3=PEEK(A1)
1330 IF PEEK(A1-M1)<8THENPOKEA1-M1,29
1340 IF A1=A2THENZ=A1:GOSUB1820:GOSUB1910:GOSUB1960:GOTO 1180
1350 IF A3=29 THEN POKEA1,C1:POKEA1+B,14
1360 IF A3<14THENZ=A1:GOSUB1790:GOSUB1820:GOSUB1960
1370 IF T2>0THENT2=T2-1:GOTO1320
1380 IF T1=0 THEN 1470
1470 JO=NOTPEEK(56321)AND15:ZX=PEEK(197)
1472 JL=NOTPEEK(56320)AND15
1480 IF JO=4THENC2=C2-1:IFC2=-1THENC2=7:GOTO1530
1482 IF JL=4ORZX=47THENC1=C1-1:IFC1=-1THENC1=7:GOTO1530
1490 IF JO=8THENC2=C2+1:IF C2=8THENC2=0:GOTO1530
1492 IF JL=8ORZX=44THENC1=C1+1:IF C1=8THENC1=0:GOTO1530
1520 IF JO=1ANDP2>0THENP2=P2-1:D2=D2+3:G3=INT(P2/10):POKE1984-G3,29
1522 IFJL=1ORZX=55THENIFP1>0THENP1=P1-1:T2=T2+3:F3=INT(P1/10):POKE1961-F3,29
1530 ONC2+1GOTO1540,1550,1560,1570,1580,1590,1600,1610
1540 M2=-40:GOTO1620
1550 M2=-39:GOTO1620
1560 M2=1:GOTO1620
1570 M2=41:GOTO1620
1580 M2=40:GOTO1620
1590 M2=39:GOTO1620
1600 M2=-1:GOTO1620
1610 M2=-41:GOTO1620
1620 A2=A2+M2:A4=PEEK(A2)
1630 IFPEEK(A2-M2)<8THENPOKEA2-M2,29
1640 IFA1=A2THENZ=A2:GOSUB1780:GOSUB1820:GOSUB1870:GOSUB1910:GOSUB1960:GOSUB1470
1650 IF A4=29THENPOKEA2,C2:POKEA2+B,4
1660 IF A4<14THENZ=A2:GOSUB1880:GOSUB1910:GOSUB1820:GOSUB1960
1670 IF D2>5THEND2=D2-1:GOTO1620
1680 IF D1=0 THEN 1180
1780 IF PEEK(A1)<8 THEN POKEA1,29
1790 A1=1620:C1=0:M1=-40
1800 F1=F1-1:POKE1944+5+F1,29
1810 RETURN
1820 IF PEEK(SF)=9 THEN POKE SF,29
1830 T1=0:T3=0:SF=0:S1=P:RETURN
1840 IF PEEK(A1)<8 THEN POKE A1,29
1850 IF PEEK(SA)=9 THEN POKE SA,29
1860 RETURN
1870 IF PEEK(A2)<8 THEN POKE A2,29
1880 A2=1622:C2=0:M2=-40
1890 G1=G1-1:POKE1972+G1,29
1900 RETURN
1910 IF PEEK(SA)=9 THEN POKE SA,29
1920 D1=0:D3=0:SA=0:S2=0:RETURN
1930 IF PEEK(A2)<8THEN POKE A2,29
1940 IF PEEK(SF)=9 THEN POKE SF,29
1950 RETURN
1960 J2=Z:GOTO 2030
1970 POKE54276,17:J1=50:FOR J2=Z+40TO1903STEP40
1980 J1=J1+3:POKE54273,J1:POKE54272,J1:V=V+1:IFV>7THENV=0
1990 IF PEEK(J2-40)<8THEN POKEJ2-40,29
2000 IF PEEK(J2)=29THEN POKE J2+B,INT(15*RND(1))+1
2010 NEXT
2020 WV=129
2030 FOR J3=1TO15
2040 POKEJ2,24:POKEJ2+B,INT(15*RND(1))
2050 NEXT:POKEJ2,8:POKEJ2+B,1:GOSUB10040:GOSUB10000
2060 IF LA=5 AND LB=5THEN POKE53272,21:PRINT"{clear}{white}{down*4} it's a draw 5 laps each"
2070 IFLB=5ANDLA<>5THENPOKE53272,21:PRINT"{clear}{down}key/joy#2 player wins 5 laps to";LA
2080 IFLA=5ANDLB<>5THENPOKE53272,21:PRINT"{clear}{down}joy#1 player wins 5 laps to";LB
2091 IF F1=-5 THEN POKE53272,21:PRINT"{clear}{down*4} joy#1 player wins":GOTO2110
2092 IF G1=-5 THEN POKE53272,21:PRINT"{clear}{down*4} key/joy#2 player wins":GOTO2110
2099 IFLA=5ORLB=5THEN2110
2100 RETURN
2110 GOSUB10020:FORZX=1TO1500:NEXT:PRINT"{down*2} press space bar to continue"
2120 GETA$:IF A$<>" "THEN 2120
2130 CLR:GOTO1000
3000 IFA1>1699ANDA1<1703THENLA=LA+1:GOSUB2060
3002 IFA2>1699ANDA2<1703THENLB=LB+1:GOSUB2060
3014 POKE1944+8,48+LA:POKE1944+31,48+LB
3090 RETURN
10000 POKE54296,15:POKE54276,33
10010 POKE54273,3:POKE54272,33:RETURN
10020 POKE54276,33:FORZX=1 TO 150STEP3:POKE54273,ZX:POKE54272,ZX:NEXT
10030 POKE54273,0:POKE54272,0:RETURN
10040 POKE54276,129:ZF=4:POKE54296,15
10042 FORZD=30TO2STEP-1:POKE54273,ZD:POKE54272,ZD:NEXT
10044 POKE54272,30:POKE54273,30:RETURN
40000 DATA 24 , 126 , 126 , 24 , 36 , 231 , 219 , 60
40010 DATA 15 , 15 , 87 , 235 , 228 , 120 , 124 , 24
40020 DATA 96 , 102 , 182 , 207 , 207 , 182 , 102 , 96
40030 DATA 24 , 124 , 120 , 228 , 227 , 87 , 15 , 15
40040 DATA 60 , 219 , 231 , 36 , 24 , 126 , 126 , 24
40050 DATA 24 , 62 , 30 , 39 , 199 , 234 , 240 , 240
40060 DATA 6 , 102 , 109 , 243 , 243 , 109 , 102 , 6
40072 DATA240,240,234,199,39,30,62,24
40080 DATA 0,0,0,0,24,60,126,255
40082 DATA 192 , 224 , 192 , 159 , 211 , 145 , 153 , 223
40610 DATA 16,48,56,56,92,100,124,254
40620 DATA 254,116,44,56,16,16,16,255
40630 DATA 24,60,108,118,124,56,16,255
40640 DATA 255,255,255,255,255,255,255,255
40650 DATA 0,0,0,0,24,60,126,255
40660 DATA 128,128,224,248,248,240,224,128
40680 DATA 255,126,126,60,24,8,0,0
40690 DATA 1,7,7,31,15,7,3,1
40700 DATA 255,255,255,255,255,255,255,255
40710 DATA 3,3,0,0,0,0,0,0
40720 DATA 0,0,0,0,14,15,7,7
40730 DATA 0,0,0,0,0,128,224,192
40740 DATA 224,224,192,0,0,0,0,0
40750 DATA 24,126,129,90,36,24,24,36
40760 DATA 137,93,42,212,47,52,206,145
40770 DATA 5,2,1,0,0,0,0,0
40780 DATA 0,0,0,0,0,1,2,5
40790 DATA 0,0,0,0,0,128,64,160
40800 DATA 160,64,128,0,0,0,0,0
40810 DATA 0,0,0,0,0,0,0,0
40820 DATA 0,92,92,126,126,92,92,0
59000 POKE52,56:POKE56,56:CLR:POKE56334,PEEK(56334)AND254:CN=0
59020 POKE1,PEEK(1)AND251
59030 FORI=0TO2048:POKEI+14336,PEEK(53248+I):NEXTI
59040 POKE1,PEEK(1)OR4:POKE56334,PEEK(56334)OR1
59060 FORI=0TO7:READCD
59062 IFCD<0THENI=7:GOTO59099
59064 POKE14336+8*CN+I,CD:NEXTI
59070 CN=CN+1:GOTO59060
59080 DATA-1
59099 GOTO1000
